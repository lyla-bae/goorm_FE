<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./reset.css" />
    <style>
      body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
      }
      h1 {
        text-align: center;
        margin-bottom: 10px;
      }
      p {
        font-size: 14px;
        margin-bottom: 20px;
        text-align: center;
      }
      span {
        font-size: 12px;
      }

      .container {
        width: 50%;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }
      .buttons {
        display: flex;
        justify-content: center;
        margin-top: 20px;
      }
      .buttons > button:not(:last-child) {
        margin-right: 10px;
      }
      ul {
        margin-top: 10px;
        width: 100%;
        padding: 20px;
        background-color: lightgray;
        display: grid;
        grid: auto-flow / repeat(3, 1fr);
        grid-gap: 10px;
        text-align: center;
      }
      ul > li {
        padding: 20px;
        background-color: white;
        border-radius: 10px;
      }
      ul > li:last-child {
        grid-column: 2;
      }

      /* 버튼스타일 추가 */
      button {
        padding: 10px 20px;
        font-size: 16px;
        background: #f2f2f2;
        border-radius: 5px;
        border: 1px solid #ccc;
      }
    </style>
    <title>Document</title>
  </head>
  <body>
    <!-- HTML 은 수정하지 않습니다. -->
    <div class="container">
      <h1>간단한 계산기</h1>
      <p>
        숫자를 2개 선택하고, 연산자를 선택하면<br />결과값이 alert으로
        출력됩니다.
      </p>

      <!-- 여기에 처음 선택한 숫자가 "First Number: 1" 형식의 텍스트로 보입니다.  -->
      <span class="firstNumber"></span>
      <!-- 여기에 두번째 선택한 숫자가 "Second Number: 2" 형식의 텍스트로 보입니다.  -->
      <span class="secondNumber"></span>
      <!-- 여기에 연산이 된 결과값이 "Result: 1 + 2 = 3" 형식의 텍스트로 보입니다.  -->
      <span class="result"></span>

      <ul></ul>

      <div class="buttons"></div>
    </div>

    <script>
      // 숫자 초기화용 값입니다. 초기화 시킬 때 이 친구를 사용해 주세요.
      const NUMBER_INITIAL_VALUE = -1;
      let firstNumber = NUMBER_INITIAL_VALUE;
      let secondNumber = NUMBER_INITIAL_VALUE;

      const firstNumberSpan = document.querySelector(".firstNumber");
      const secondNumberSpan = document.querySelector(".secondNumber");
      const resultSpan = document.querySelector(".result");

      const numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];
      // 위 numbers 배열을 활용하여 ul 태그에 순서대로 숫자를 화면에 보여주세요.
      // li 태그 생김새 : <li><button>1</button></li>
      const ulEl = document.querySelector("ul");
      ulEl.innerHTML = numbers
        .map((number) => `<li><button>${number}</button></li>`)
        .join("");

      const operators = ["+", "-", "*", "/"];
      // 위 operators 배열을 활용하여 div.buttons 안에 <button>+</button>형태로
      // 연산자들을 순서대로 화면에 보여주세요
      const buttonsEl = document.querySelector(".buttons");
      buttonsEl.innerHTML = operators
        .map((operator) => `<button>${operator}</button>`)
        .join("");

      ulEl.addEventListener("click", (e) => {
        // 버튼이 아닌 다른 곳을 클릭했을 때 무시
        if (e.target.tagName !== "BUTTON") return;

        // 클릭한 버튼의 숫자 가져오기
        const selectedNumber = Number(e.target.textContent);

        // firstNumber와 secondNumber에 숫자 할당
        if (firstNumber === NUMBER_INITIAL_VALUE) {
          firstNumber = selectedNumber;
          firstNumberSpan.textContent = `First Number: ${firstNumber}`;
        } else if (secondNumber === NUMBER_INITIAL_VALUE) {
          secondNumber = selectedNumber;
          secondNumberSpan.textContent = `Second Number: ${secondNumber}`;
        } else if (resultSpan.textContent !== "") {
          // 이미 두 숫자가 선택되어 있고 결과가 표시된 상태에서 숫자를 클릭하면 초기화
          firstNumber = NUMBER_INITIAL_VALUE;
          secondNumber = NUMBER_INITIAL_VALUE;
          firstNumberSpan.textContent = "";
          secondNumberSpan.textContent = "";
          resultSpan.textContent = "";
        }
      });

      buttonsEl.addEventListener("click", (e) => {
        // 버튼이 아닌 다른 곳을 클릭했을 때 무시
        if (e.target.tagName !== "BUTTON") return;

        // 클릭한 버튼의 연산자 가져오기
        const operator = e.target.textContent;

        // 두 숫자가 모두 선택되었을 때만 계산 수행
        if (
          firstNumber !== NUMBER_INITIAL_VALUE &&
          secondNumber !== NUMBER_INITIAL_VALUE
        ) {
          // 연산자에 따라 계산 수행
          let result;
          switch (operator) {
            case "+":
              result = firstNumber + secondNumber;
              break;
            case "-":
              result = firstNumber - secondNumber;
              break;
            case "*":
              result = firstNumber * secondNumber;
              break;
            case "/":
              result = firstNumber / secondNumber;
              result = Math.round(result * 100) / 100; // 소수점 둘째자리까지 반올림
              break;
          }

          resultSpan.textContent = `Result: ${firstNumber} ${operator} ${secondNumber} = ${result}`;
        } else {
          // 숫자가 하나라도 선택되지 않았을 때 경고창 표시
          alert("숫자를 선택해주세요.");
        }
      });
    </script>
  </body>
</html>
